<!DOCTYPE html>
{% extends 'base_avaliador.html' %}
{% load staticfiles %}

{% block assets %}
    <style>
        #principal {
            position: relative;
        }

        #img_mapa {
            position: absolute;
        }

        #img_point {
            position: absolute;
        }
    </style>

{% endblock %}


{% block conteudo %}

    <div class="w3-container">
        <div id="main" class="w3-container w3-red">
            <h2>Territórios</h2>
        </div>
        <div class="w3-row">
            <div id="principal">
                <img id="img_mapa" src="{% static "imagens/WarDM_map.png" %}" alt="Mapa" usemap="#mapa_war">
                {% for territorio in territorios %}
                    <a onclick="document.getElementById('id01').style.display='block'">
                        <img style="position:absolute" id="{{ territorio.nome.upper }}" src="{% static "imagens/point.png" %}" width="2%" href="#">
                    </a>

                {% endfor %}

            </div>
        </div>
    </div>


    <div id="id01" class="w3-modal">
        <div class="w3-modal-content w3-card-4 w3-animate-zoom" style="max-width:550px">
            <header class="w3-container w3-red">
                    <span onclick="document.getElementById('id01').style.display='none'"
                          class="w3-button w3-red w3-xxlarge w3-display-topright">&times;</span>
                <h1>Brasil</h1>
            </header>
            <div class="w3-row-padding">
                <div class="w3-col" style="width:42%">
                    <div class="w3-row w3-section">
                        <div class="w3-rest">
                            <img src="{% static "imagens/brasil.png" %}" alt="brasil">
                        </div>
                    </div>
                </div>
                <div class="w3-col" style="width:58%">
                    <div class="w3-row w3-section">
                        <div class="w3-rest">
                            <div class="w3-topbar w3-large"><b>Território: {{ brasil.nome }}</b><br></div>
                            <div class="w3-topbar w3-large"><b>Missão: {{ brasil.descricao }}</b><br></div>
                            <div class="w3-topbar w3-large"><b>Pontuação: {{ brasil.pontuacao }}</b><br></div>
                            <div class="w3-topbar w3-large"><b>Bônus: {{ brasil.bonus_max }}</b><br></div>
                            <div class="w3-topbar w3-large"><b>Data abertura: {{ brasil.data_abertura }}</b><br></div>
                            <div class="w3-topbar w3-large"><b>Data encerramento: {{ brasil.data_encerramento }}</b><br>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="w3-row-padding">

            </div>
            <div class="w3-container w3-light-grey w3-padding">
                <a id="id_cadastrar" class="w3-button w3-red w3-left w3-border w3-large"
                   href="{% url 'cadastroFormulario' brasil.pk %}">Cadastrar relatório
                </a>
                <button class="w3-button w3-right w3-white w3-border "
                        onclick="document.getElementById('id01').style.display='none'">Close
                </button>
            </div>
        </div>
    </div>



    <script>
        var mapa = document.getElementById("img_mapa");
        var main = document.getElementById("main");

        var territorios = [
            {"nome": "BRASIL", "largura": 1270, "altura": 1930},
            {"nome": "ARGENTINA", "largura": 1085, "altura": 2270}
        ]

        function ajuste_points() {
            for (i = 0; i < territorios.length; i++) {
                var point = document.getElementById(territorios[i].nome);
                var porcentagem_largura = mapa.width / mapa.naturalWidth;
                var porcentagem_altura = mapa.height / mapa.naturalHeight;
                point.style.left = (territorios[i].largura * porcentagem_largura) + "px";
                point.style.top = (territorios[i].altura * porcentagem_altura) + "px";
            }
        }

        function resize_mapa() {
            mapa.width = main.clientWidth;
            ajuste_points();
        }

        resize_mapa();
        window.onresize = resize_mapa;
    </script>
{% endblock %}